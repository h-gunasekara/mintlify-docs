---
title: 'Smart Search'
description: 'Understanding the smart search capabilities of the Catalog API'
---

# Smart Search

The Catalog API's smart search feature goes beyond simple text matching. When you provide a natural language query, the API intelligently processes it to enhance search relevance and accuracy.

## How Smart Search Works

When you include a `query` parameter in your request, the API performs several intelligent processing steps:

<Steps>
  <Step title="Implicit Filter Extraction">
    The API analyzes the query to identify potential filters like price constraints, colors, and fabrics.
  </Step>
  <Step title="Query Expansion">
    The original query terms are expanded with synonyms to match a wider range of relevant products.
  </Step>
  <Step title="Filter Resolution">
    Implicit filters are compared with explicit filters, with explicit filters taking precedence.
  </Step>
  <Step title="Full-Text Search">
    The expanded query and refined filters are passed to the database for optimized search.
  </Step>
</Steps>

## Implicit Filter Extraction

The API can detect various implied filters in natural language queries:

### Price Constraints

<CodeGroup>
```text Example Queries
"shirts under $50"
"luxury watches over $1000"
"budget-friendly shoes under 30 dollars"
```
</CodeGroup>

When the API detects price-related phrases, it automatically extracts them as price filters:

- "under $X" → `price_max: X`
- "less than $X" → `price_max: X`
- "over $X" → `price_min: X`
- "more than $X" → `price_min: X`
- "between $X and $Y" → `price_min: X, price_max: Y`

### Color Detection

<CodeGroup>
```text Example Queries
"blue shirt"
"red running shoes"
"black leather jacket"
```
</CodeGroup>

The API recognizes common color terms and converts them to color attribute filters:

```json
{
  "attributes": {
    "color": "Blue" // Extracted from "blue shirt"
  }
}
```

### Fabric Detection

<CodeGroup>
```text Example Queries
"cotton t-shirts"
"linen summer dress"
"wool sweaters"
```
</CodeGroup>

The API identifies fabric types and adds them as fabric attribute filters:

```json
{
  "attributes": {
    "fabric": {
      "cotton": true // Extracted from "cotton t-shirts"
    }
  }
}
```

## Query Expansion

To improve search coverage, the API expands search terms with synonyms:

<CodeGroup>
```text Original Query
"warm pants"
```

```text Expanded Query
"warm | winter | insulated | pants | trousers | bottoms"
```
</CodeGroup>

This expansion uses the `|` (OR) operator to match any of the synonyms, increasing the chances of finding relevant products.

### Common Expansions

| Original Term | Expanded Terms |
| --- | --- |
| pants | pants \| trousers \| bottoms |
| shirt | shirt \| top \| tee |
| warm | warm \| winter \| insulated |
| shoes | shoes \| footwear \| sneakers |

## Filter Resolution Logic

When both implicit filters (from the query) and explicit filters (in the `filters` object) are present:

1. The API detects implicit filters from the query
2. Explicit filters in the request always override implicit filters
3. If an implicit filter doesn't conflict with any explicit filter, it's applied

### Example

<CodeGroup>
```json Query and Filters
{
  "query": "blue shirts under $50",
  "filters": {
    "price_max": 30,  // This overrides the "under $50" from the query
    "vendor": "EcoWear"  // This is applied alongside the implicit color filter
  }
}
```

```json Effective Filters
{
  "price_max": 30,  // From explicit filters (overrides implicit)
  "vendor": "EcoWear",  // From explicit filters
  "attributes": {
    "color": "Blue"  // From implicit filters (no conflict)
  }
}
```
</CodeGroup>

## Best Practices

### Use Natural Language Queries

Take advantage of the smart search by using natural language in your queries:

<CodeGroup>
```json Good Query
{
  "query": "affordable blue cotton shirts under $40"
}
```

```json Less Effective Query
{
  "query": "shirts"
}
```
</CodeGroup>

### Combine with Explicit Filters When Needed

For more precise control, combine natural language queries with explicit filters:

<CodeGroup>
```json Combined Approach
{
  "query": "comfortable running shoes",
  "filters": {
    "price_min": 50,
    "price_max": 150,
    "vendor": "Nike",
    "is_available": true
  }
}
```
</CodeGroup>

### Leverage Synonym Expansion

Use common terms to benefit from synonym expansion, but don't worry about manually including all variations:

<CodeGroup>
```json Good Query (Will Expand)
{
  "query": "pants"  // Will match "trousers" and "bottoms" too
}
```

```json Unnecessary Query
{
  "query": "pants OR trousers OR bottoms"  // Manually duplicating what the API does
}
```
</CodeGroup>

## Related Guides

- [Request Structure](/developer-guide/request-structure) - Full API request format
- [Filters](/developer-guide/filters) - Detailed information on explicit filtering options
- [Advanced Topics](/advanced-topics/query-expansion) - More detail on query expansion techniques 